{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 12d7b605cbcec4ecfb77","webpack:///./modules/color.js","webpack:///./modules/stylesheet.js","webpack:///./ui/marker.js","webpack:///./modules/colorPicker.js","webpack:///./iro.js","webpack:///./ui/slider.js","webpack:///./ui/svg.js","webpack:///./ui/wheel.js"],"names":["round","Math","floor","hsv2Rgb","hsv","r","g","b","i","f","p","q","t","h","s","v","rgb2Hsv","rgb","max","min","delta","hue","hsv2Hsl","l","abs","hsl2Hsv","hsl","rgb2Str","a","hsl2Str","rgb2Hex","useShorthand","divider","bitLength","strLength","int","str","toString","Array","length","join","parseColorStr","maxValues","parsed","match","val1","parseInt","val2","val3","parseFloat","undefined","parseRgbStr","parseHslStr","parseHexStr","hex","replace","isShorthand","bitMask","multiplier","getColor","value","color","clamp","compareObjs","changes","key","mix","color1","color2","weight","rgb1","rgb2","lighten","amount","col","darken","_onChange","_value","set","prototype","constructor","test","rgbString","hslString","hexString","setChannel","model","channel","clone","compare","Object","defineProperties","get","newValue","oldValue","hasOwnProperty","module","exports","stylesheet","style","document","createElement","head","appendChild","createTextNode","sheet","rules","cssRules","map","setRule","selector","property","$1","toLowerCase","index","declaration","insertRule","e","addRule","setProperty","enabled","disabled","cssText","ret","push","css","ruleSet","getPropertyValue","CLASS_PREFIX","marker","svg","opts","baseGroup","class","circle","fill","strokeWidth","stroke","move","x","y","setTransform","EVENT_MOUSEDOWN","EVENT_MOUSEMOVE","EVENT_MOUSEUP","EVENT_TOUCHSTART","EVENT_TOUCHMOVE","EVENT_TOUCHEND","EVENT_READYSTATE_CHANGE","READYSTATE_COMPLETE","listen","el","eventList","callback","addEventListener","unlisten","removeEventListener","whenReady","_this","readyState","stateChange","colorPicker","_events","_mouseTarget","_colorChangeActive","styles","_mount","querySelector","width","height","padding","borderWidth","markerRadius","sliderMargin","sliderHeight","bodyWidth","wheelRadius","leftMargin","borderStyles","w","borderColor","display","ui","cX","cY","rMax","border","lightness","wheelLightness","anticlockwise","sliderType","_update","bind","defaultValue","on","base","updateUrls","emit","update","properties","prop","eventType","events","off","splice","indexOf","callbackList","concat","args","apply","handleEvent","point","touches","changedTouches","rect","getBoundingClientRect","clientX","left","clientY","top","type","uiElement","checkHit","input","preventDefault","Color","ColorPicker","Stylesheet","version","VERSION","slider","range","_opts","radius","insert","rx","ry","setGradient","gradient","_gradient","stops","setAttrs","stopColor","percent","dist","GRADIENT_INDEX","GRADIENT_SUFFIX","SVG_NAMESPACE","SVG_ATTRIBUTE_SHORTHANDS","opacity","offset","stopOpacity","SVG_TRANSFORM_SHORTHANDS","translate","scale","rotate","ua","window","navigator","userAgent","IS_IE","IS_SAFARI","svgElement","root","parent","attrs","createElementNS","_root","_svgTransforms","_transformList","transform","baseVal","arc","cx","cy","startAngle","endAngle","largeArcFlag","PI","x1","cos","y1","sin","x2","y2","d","transformFn","svgTransforms","createSVGTransform","appendItem","attr","name","setAttribute","getUrl","_refs","svgGradient","stopElements","_defs","id","stop","location","href","svgRoot","call","_gradients","create","gradients","sqrt","wheel","ringGroup","saturation","_lightness","toFixed","hueAngle","rangeMax","_x","_y","angle","atan2","dx","dy"],"mappings":"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","file":"iro.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"iro\"] = factory();\n\telse\n\t\troot[\"iro\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 12d7b605cbcec4ecfb77","var round = Math.round,\n    floor = Math.floor;\n\n// TODO: compare(rgb, hsv, hsl) + clone methods\n\n/**\n  * @desc convert hsv object to rgb\n  * @param {Object} hsv - hsv object\n  * @return {Object} rgb object\n*/\nfunction hsv2Rgb(hsv) {\n  var r, g, b, i, f, p, q, t;\n  var h = hsv.h/360, s = hsv.s/100, v = hsv.v/100;\n  i = floor(h * 6);\n  f = h * 6 - i;\n  p = v * (1 - s);\n  q = v * (1 - f * s);\n  t = v * (1 - (1 - f) * s);\n  switch (i % 6) {\n    case 0: r = v, g = t, b = p; break;\n    case 1: r = q, g = v, b = p; break;\n    case 2: r = p, g = v, b = t; break;\n    case 3: r = p, g = q, b = v; break;\n    case 4: r = t, g = p, b = v; break;\n    case 5: r = v, g = p, b = q; break;\n  }\n  return {r: round(r * 255), g: round(g * 255), b: round(b * 255)};\n};\n\n/**\n  * @desc convert rgb object to hsv\n  * @param {Object} rgb - rgb object\n  * @return {Object} hsv object\n*/\nfunction rgb2Hsv(rgb) {\n  // Modified from https://github.com/bgrins/TinyColor/blob/master/tinycolor.js#L446\n  var r = rgb.r / 255,\n      g = rgb.g / 255,\n      b = rgb.b / 255,\n      max = Math.max(r, g, b),\n      min = Math.min(r, g, b),\n      delta = max - min,\n      hue;\n  switch (max) {\n    case min: hue = 0; break;\n    case r: hue = (g - b) / delta + (g < b ? 6 : 0); break;\n    case g: hue = (b - r) / delta + 2; break;\n    case b: hue = (r - g) / delta + 4; break;\n  }\n  hue /= 6;\n  return {\n    h: round(hue * 360),\n    s: round(max == 0 ? 0 : (delta / max) * 100),\n    v: round(max * 100)\n  };\n};\n\n/**\n  * @desc convert hsv object to hsl\n  * @param {Object} hsv - hsv object\n  * @return {Object} hsl object\n*/\nfunction hsv2Hsl(hsv) {\n  var s = hsv.s / 100,\n      v = hsv.v / 100;\n  var l = 0.5 * v * (2 - s);\n  s = v * s / (1 - Math.abs(2 * l - 1));\n  return {\n    h: hsv.h,\n    s: round(s * 100) || 0,\n    l: round(l * 100)\n  };\n};\n\n/**\n  * @desc convert hsl object to hsv\n  * @param {Object} hsl - hsl object\n  * @return {Object} hsv object\n*/\nfunction hsl2Hsv(hsl) {\n  var s = hsl.s / 100,\n  l = hsl.l / 100;\n  l *= 2;\n  s *= (l <= 1) ? l : 2 - l;\n  return {\n    h: hsl.h,\n    s: round(((2 * s) / (l + s)) * 100),\n    v: round(((l + s) / 2) * 100)\n  };\n};\n\n/**\n  * @desc convert rgb object to string\n  * @param {Object} rgb - rgb object\n  * @return {Object} rgb string\n*/\nfunction rgb2Str(rgb) {\n  return \"rgb\" + (rgb.a ? \"a\" : \"\") + \"(\" + rgb.r + \", \" + rgb.g + \", \" + rgb.b + (rgb.a ? \", \" + rgb.a : \"\") + \")\";\n};\n\n/**\n  * @desc convert hsl object to string\n  * @param {Object} hsl - hsl object\n  * @return {Object} hsl string\n*/\nfunction hsl2Str(hsl) {\n  return \"hsl\" + (hsl.a ? \"a\" : \"\") + \"(\" + hsl.h + \", \" + hsl.s + \"%, \" + hsl.l + \"%\" + (hsl.a ? \", \" + hsl.a : \"\") + \")\";\n};\n\n/**\n  * @desc convert rgb object to hex string\n  * @param {Object} rgb - rgb object\n  * @return {Object} hex string\n*/\nfunction rgb2Hex(rgb) {\n  var r = rgb.r,\n      g = rgb.g,\n      b = rgb.b;\n  // If each RGB channel's value is a multiple of 17, we can use HEX shorthand notation\n  var useShorthand = (r % 17 == 0) && (g % 17 == 0) && (b % 17 == 0),\n      // If we're using shorthand notation, divide each channel by 17\n      divider = useShorthand ? 17 : 1,\n      // bitLength of each channel (for example, F is 4 bits long while FF is 8 bits long)\n      bitLength = useShorthand ? 4 : 8,\n      // Target length of the string (ie \"#FFF\" or \"#FFFFFF\")\n      strLength = useShorthand ? 4 : 7,\n      // Combine the channels together into a single integer\n      int = (r / divider) << (bitLength * 2) | (g / divider) << bitLength | (b / divider),\n      // Convert that integer to a hex string\n      str = int.toString(16);\n      // Add right amount of left-padding\n      return \"#\" + (new Array(strLength - str.length).join(\"0\")) + str;  \n};\n\n/**\n  * @desc generic parser for hsl / rgb / etc string\n  * @param {String} str - color string\n  * @param {Array} maxValues - max values for each channel (used for calculating percent-based values)\n  * @return {Array} type (rgb | rgba | hsl | hsla) values for each channel\n*/\nfunction parseColorStr(str, maxValues) {\n  var parsed = str.match(/(\\S+)\\((\\d+)(%?)(?:\\D+?)(\\d+)(%?)(?:\\D+?)(\\d+)(%?)(?:\\D+?)?([0-9\\.]+?)?\\)/i),\n      val1 = parseInt(parsed[2]),\n      val2 = parseInt(parsed[4]),\n      val3 = parseInt(parsed[6]);\n  return [\n    parsed[1],\n    parsed[3] == \"%\" ? val1 / 100 * maxValues[0] : val1,\n    parsed[5] == \"%\" ? val2 / 100 * maxValues[1] : val2,\n    parsed[7] == \"%\" ? val3 / 100 * maxValues[2] : val3,\n    parseFloat(parsed[8]) || undefined\n  ];\n};\n\n/**\n  * @desc parse rgb string\n  * @param {String} str - color string\n  * @return {Object} rgb object\n*/\nfunction parseRgbStr(str) {\n  var parsed = parseColorStr(str, [255, 255, 255]);\n  return {\n    r: parsed[1],\n    g: parsed[2],\n    b: parsed[3]\n  };\n};\n\n/**\n  * @desc parse hsl string\n  * @param {String} str - color string\n  * @return {Object} hsl object\n*/\nfunction parseHslStr(str) {\n  var parsed = parseColorStr(str, [360, 100, 100]);\n  return {\n    h: parsed[2],\n    s: parsed[3],\n    l: parsed[4]\n  };\n};\n\n/**\n  * @desc parse hex string\n  * @param {String} str - color string\n  * @return {Object} rgb object\n*/\nfunction parseHexStr(hex) {\n  // Strip any \"#\" characters\n  hex = hex.replace(\"#\", \"\");\n  // Prefix the hex string with \"0x\" which indicates a number in hex notation, then convert to an integer\n  var int = parseInt(\"0x\" + hex),\n      // If the length of the input is only 3, then it is a shorthand hex color\n      isShorthand = hex.length == 3,\n      // bitMask for isolating each channel\n      bitMask = isShorthand ? 0xF : 0xFF,\n      // bitLength of each channel (for example, F is 4 bits long while FF is 8 bits long)\n      bitLength = isShorthand ? 4 : 8,\n      // If we're using shorthand notation, multiply each channel by 17\n      multiplier = isShorthand ? 17 : 1;\n  return {\n    r: ((int >> (bitLength * 2)) & bitMask) * multiplier,\n    g: ((int >> bitLength) & bitMask) * multiplier,\n    b: (int & bitMask) * multiplier,\n  };\n};\n\n/**\n  * @desc convert object / string input to color if necessary\n  * @param {Object | String | color} value - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n  * @return {color} color instance\n*/\nfunction getColor(value) {\n  return value instanceof color ? value : new color(value);\n};\n\n/**\n  * @desc clamp value between min and max\n  * @param {Number} value\n  * @param {Number} min\n  * @param {Number} max\n  * @return {Number}\n*/\nfunction clamp(value, min, max) {\n  return value <= min ? min : value >= max ? max : value;\n};\n\n/**\n  * @desc compare values between two objects, returns a object representing changes with true/false values\n  * @param {Object} a\n  * @param {Object} b\n  * @return {Object}\n*/\nfunction compareObjs(a, b) {\n  var changes = {};\n  for (var key in a) changes[key] = b[key] != a[key];\n  return changes;\n};\n\n/**\n  * @desc mix two colors\n  * @param {Object | String | color} color1 - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n  * @param {Object | String | color} color2 - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n  * @param {Number} weight - closer to 0 = more color1, closer to 100 = more color2\n  * @return {color} color instance\n*/\nfunction mix(color1, color2, weight) {\n  var rgb1 = getColor(color1).rgb,\n      rgb2 = getColor(color2).rgb;\n  weight = clamp((weight / 100 || 0.5), 0, 1);\n  return new color({\n    r: floor(rgb1.r + (rgb2.r - rgb1.r) * weight),\n    g: floor(rgb1.g + (rgb2.g - rgb1.g) * weight),\n    b: floor(rgb1.b + (rgb2.b - rgb1.b) * weight),\n  });\n};\n\n/**\n  * @desc lighten color by amount\n  * @param {Object | String | color} color - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n  * @param {Number} amount\n  * @return {color} color instance\n*/\nfunction lighten(color, amount) {\n  var col = getColor(color),\n      hsv = col.hsv;\n  hsv.v = clamp(hsv.v + amount, 0, 100);\n  col.hsv = hsv;\n  return col;\n};\n\n/**\n  * @desc darken color by amount\n  * @param {Object | String | color} color - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n  * @param {Number} amount\n  * @return {color} color instance\n*/\nfunction darken(color, amount) {\n  var col = getColor(color),\n      hsv = col.hsv;\n  hsv.v = clamp(hsv.v - amount, 0, 100);\n  col.hsv = hsv;\n  return col;\n};\n\n/**\n  * @constructor color object\n  * @param {Object | String | color} value - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n*/\nconst color = function(value) {\n  // The watch callback function for this color will be stored here\n  this._onChange = false;\n  // The default color value\n  this._value = {h: undefined, s: undefined, v: undefined};\n  if (value) this.set(value);\n};\n\n// Expose functions as static helpers\ncolor.mix = mix;\ncolor.lighten = lighten;\ncolor.darken = darken;\ncolor.hsv2Rgb = hsv2Rgb;\ncolor.rgb2Hsv = rgb2Hsv;\ncolor.hsv2Hsl = hsv2Hsl;\ncolor.hsl2Hsv = hsl2Hsv;\ncolor.hsl2Str = hsl2Str;\ncolor.rgb2Str = rgb2Str;\ncolor.rgb2Hex = rgb2Hex;\ncolor.parseHexStr = parseHexStr;\ncolor.parseHslStr = parseHslStr;\ncolor.parseRgbStr = parseRgbStr;\n\ncolor.prototype = {\n  constructor: color,\n\n  /**\n    * @desc set the color from any valid value\n    * @param {Object | String | color} value - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n  */\n  set: function(value) {\n    if (typeof value == \"object\") {\n      if (value instanceof color) {\n        this.hsv = color.hsv;\n      } else if (\"r\" in value) {\n        this.rgb = value;\n      } else if (\"v\" in value) {\n        this.hsv = value;\n      } else if (\"l\" in value) {\n        this.hsl = value;\n      }\n    } else if (typeof value == \"string\") {\n      if (/^rgb/.test(value)) {\n        this.rgbString = value;\n      } else if (/^hsl/.test(value)) {\n        this.hslString = value;\n      } else if (/^#[0-9A-Fa-f]/.test(value)) {\n        this.hexString = value;\n      }\n    }\n  },\n\n  /**\n    * @desc shortcut to set a specific channel value\n    * @param {String} model - hsv | hsl | rgb\n    * @param {String} channel - individual channel to set, for example if model = hsl, chanel = h | s | l\n    * @param {Number} value - new value for the channel\n  */\n  setChannel: function (model, channel, value) {\n    var v = this[model];\n    v[channel] = value;\n    this[model] = v;\n  },\n\n  /**\n    * @desc make new color instance with the same value as this one\n    * @return {color}\n  */\n  clone: function () {\n    return new color(this);\n  },\n\n  /**\n    * @desc compare this color against another, returns a object representing changes with true/false values\n    * @param {Object | String | color} color - color to compare against\n    * @param {String} model - hsv | hsl | rgb\n    * @return {Object}\n  */\n  compare: function (color, model) {\n    model = model || \"hsv\";\n    return compareObjs(this[model], getColor(color)[model]);\n  },\n  \n  /**\n    * @desc mix a color into this one\n    * @param {Object | String | color} color - color instance, object (hsv, hsl or rgb), string (hsl, rgb, hex)\n    * @param {Number} weight - closer to 0 = more current color, closer to 100 = more new color\n  */\n  mix: function(color, weight) {\n    this.hsv = mix(this, color, weight).hsv;\n  },\n\n  /**\n    * @desc lighten color by amount\n    * @param {Number} amount\n  */\n  lighten: function(amount) {\n    lighten(this, amount);\n  },\n\n  /**\n    * @desc darken color by amount\n    * @param {Number} amount\n  */\n  darken: function(amount) {\n    darken(this, amount);\n  },\n};\n\nObject.defineProperties(color.prototype, {\n  hsv: {\n    get: function () {\n      // _value is cloned to allow changes to be made to the values before passing them back\n      var v = this._value;\n      return {h: v.h, s: v.s, v: v.v};\n    },\n    set: function (newValue) {\n      // If this color is being watched for changes we need to compare the new and old values to check the difference\n      // Otherwise we can just be lazy\n      if (this._onChange) {\n        var oldValue = this._value;\n        for (var channel in oldValue) {\n          if (!newValue.hasOwnProperty(channel)) newValue[channel] = oldValue[channel];\n        }\n        var changes = compareObjs(oldValue, newValue);\n        // Update the old value\n        this._value = newValue;\n        // If the value has changed, call hook callback\n        if (changes.h || changes.s || changes.v) this._onChange(this, changes);\n      } else {\n        this._value = newValue;\n      }\n    },\n  },\n  rgb: {\n    get: function() {\n      return hsv2Rgb(this._value);\n    },\n    set: function(value) {\n      this.hsv = rgb2Hsv(value);\n    }\n  },\n  hsl: {\n    get: function() {\n      return hsv2Hsl(this._value);\n    },\n    set: function(value) {\n      this.hsv = hsl2Hsv(value);\n    }\n  },\n  rgbString: {\n    get: function() {\n      return rgb2Str(this.rgb);\n    },\n    set: function(value) {\n      this.rgb = parseRgbStr(value);\n    }\n  },\n  hexString: {\n    get: function() {\n      return rgb2Hex(this.rgb);\n    },\n    set: function(value) {\n      this.rgb = parseHexStr(value);\n    }\n  },\n  hslString: {\n    get: function() {\n      return hsl2Str(this.hsl);\n    },\n    set: function(value) {\n      this.hsl = color.parseHslStr(value);\n    }\n  }\n});\n\nmodule.exports = color;\n\n\n// WEBPACK FOOTER //\n// ./modules/color.js","/**\n  @constructor stylesheet writer\n*/\nconst stylesheet = function() {\n  // Create a new style element\n  let style = document.createElement(\"style\");\n  document.head.appendChild(style);\n  // Webkit apparently requires a text node to be inserted into the style element\n  // (according to https://davidwalsh.name/add-rules-stylesheets)\n  style.appendChild(document.createTextNode(\"\"));\n  this.style = style;\n  // Create a reference to the style element's CSSStyleSheet object\n  // CSSStyleSheet API: https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet\n  let sheet = style.sheet;\n  this.sheet = sheet;\n  // Get a reference to the sheet's CSSRuleList object\n  // CSSRuleList API: https://developer.mozilla.org/en-US/docs/Web/API/CSSRuleList\n  this.rules = sheet.rules || sheet.cssRules;\n  // We'll store references to all the CSSStyleDeclaration objects that we change here, keyed by the CSS selector they belong to\n  // CSSStyleDeclaration API: https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleDeclaration\n  this.map = {};\n};\n\nstylesheet.prototype = {\n  constructor: stylesheet,\n\n  /**\n    * @desc Set a specific rule for a given selector\n    * @param {String} selector - the CSS selector for this rule (e.g. \"body\", \".class\", \"#id\")\n    * @param {String} property - the CSS property to set (e.g. \"background-color\", \"font-family\", \"z-index\")\n    * @param {String} value    - the new value for the rule (e.g. \"rgb(255, 255, 255)\", \"Helvetica\", \"99\")\n  */\n  setRule: function(selector, property, value) {\n    var sheet = this.sheet;\n    var rules = sheet.rules || sheet.cssRules;\n    var map = this.map;\n    // Convert property from camelCase to snake-case\n    property = property.replace(/([A-Z])/g, function($1) {\n      return \"-\" + $1.toLowerCase();\n    });\n    if (!map.hasOwnProperty(selector)) {\n      // If the selector hasn't been used yet we want to insert the rule at the end of the CSSRuleList, so we use its length as the index value\n      var index = rules.length;\n      // Prepare the rule declaration text, since both insertRule and addRule take this format\n      var declaration = property + \": \" + value;\n      // Insert the new rule into the stylesheet\n      try {\n        // Some browsers only support insertRule, others only support addRule, so we have to use both\n        sheet.insertRule(selector + \" {\" + declaration + \";}\", index);\n      } catch(e) {\n        sheet.addRule(selector, declaration, index);\n      } finally {\n        // Because safari is perhaps the worst browser in all of history, we have to remind it to keep the sheet rules up-to-date\n        rules = sheet.rules || sheet.cssRules;\n        // Add our newly inserted rule's CSSStyleDeclaration object to the internal map\n        map[selector] = rules[index].style;\n      }\n    }\n    else {\n      map[selector].setProperty(property, value);\n    }\n  }\n};\n\nObject.defineProperties(stylesheet.prototype, {\n  enabled: {\n    get: function() {\n      return !this.sheet.disabled;\n    },\n    set: function(value) {\n      this.sheet.disabled = !value;\n    },\n  },\n  // TODO: consider removing cssText + css properties since i don't tink they're that useful\n  cssText: {\n    /**\n      * @desc Get the stylesheet text\n      * @return {String} css text\n    */\n    get: function() {\n      var map = this.map;\n      var ret = [];\n      for (var selector in map) {\n        ret.push(selector.replace(/,\\W/g, \",\\n\") + \" {\\n\\t\" + map[selector].cssText.replace(/;\\W/g, \";\\n\\t\") + \"\\n}\");\n      }\n      return ret.join(\"\\n\");\n    }\n  },\n  css: {\n     /**\n      * @desc Get an object representing the current css styles\n      * @return {Object} css object\n    */\n    get: function() {\n      var map = this.map;\n      var ret = {};\n      for (var selector in map) {\n        var ruleSet = map[selector];\n        ret[selector] = {};\n        for (var i = 0; i < ruleSet.length; i++) {\n          var property = ruleSet[i];\n          ret[selector][property] = ruleSet.getPropertyValue(property);\n        }\n      }\n      return ret;\n    }\n  }\n});\n\nmodule.exports = stylesheet;\n\n\n// WEBPACK FOOTER //\n// ./modules/stylesheet.js","// css class prefix for this element\nvar CLASS_PREFIX = \"iro__marker\";\n\n /**\n  * @constructor marker UI\n  * @param {svgRoot} svg - svgRoot object\n  * @param {Object} opts - options\n*/\nconst marker = function (svg, opts) {\n  var baseGroup = svg.g({\n    class: CLASS_PREFIX\n  });\n  baseGroup.circle(0, 0, opts.r, {\n    class: CLASS_PREFIX + \"__outer\",\n    fill: \"none\",\n    strokeWidth: 5,\n    stroke: \"#000\",\n  });\n  baseGroup.circle(0, 0, opts.r, {\n    class: CLASS_PREFIX + \"__inner\",\n    fill: \"none\",\n    strokeWidth: 2,\n    stroke: \"#fff\",\n  });\n  this.g = baseGroup;\n};\n\nmarker.prototype = {\n  constructor: marker,\n\n  /**\n    * @desc move marker to centerpoint (x, y) and redraw\n    * @param {Number} x - point x coordinate\n    * @param {Number} y - point y coordinate\n  */\n  move: function(x, y) {\n    this.g.setTransform(\"translate\", [x, y]);\n  }\n};\n\nmodule.exports = marker;\n\n\n// WEBPACK FOOTER //\n// ./ui/marker.js","import wheel from \"ui/wheel\";\nimport slider from \"ui/slider\";\nimport svg from \"ui/svg\";\nimport iroColor from \"modules/color\";\nimport iroStyleSheet from \"modules/stylesheet\";\n\nconst EVENT_MOUSEDOWN = \"mousedown\",\n      EVENT_MOUSEMOVE = \"mousemove\",\n      EVENT_MOUSEUP = \"mouseup\",\n      EVENT_TOUCHSTART = \"touchstart\",\n      EVENT_TOUCHMOVE = \"touchmove\",\n      EVENT_TOUCHEND = \"touchend\",\n      EVENT_READYSTATE_CHANGE = \"readystatechange\",\n      READYSTATE_COMPLETE = \"complete\";\n\n/**\n  * @desc listen to one or more events on an element\n  * @param {Element} el target element\n  * @param {Array} eventList the events to listen to\n  * @param {Function} callback the event callback function\n*/\nfunction listen(el, eventList, callback) {\n  for (var i = 0; i < eventList.length; i++) {\n    el.addEventListener(eventList[i], callback);\n  }\n};\n\n/**\n  * @desc remove an event listener on an element\n  * @param {Element} el target element\n  * @param {Array} eventList the events to remove\n  * @param {Function} callback the event callback function\n*/\nfunction unlisten(el, eventList, callback) {\n  for (var i = 0; i < eventList.length; i++) {\n    el.removeEventListener(eventList[i], callback);\n  }\n};\n\n/**\n  * @desc call fn callback when the page document is ready\n  * @param {Function} callback callback function to be called\n*/\nfunction whenReady(callback) {\n  var _this = this;\n  if (document.readyState == READYSTATE_COMPLETE) {\n    callback();\n  }\n  else {\n    listen(document, [EVENT_READYSTATE_CHANGE], function stateChange(e) {\n      if (document.readyState == READYSTATE_COMPLETE) {\n        callback();\n        unlisten(document, [EVENT_READYSTATE_CHANGE], stateChange);\n      }\n    });\n  }\n};\n\n/**\n  * @constructor color wheel object\n  * @param {Element | String} el - a DOM element or the CSS selector for a DOM element to use as a container for the UI\n  * @param {Object} opts - options for this instance\n*/\nconst colorPicker = function(el, opts) {\n  opts = opts || {};\n  // event storage for `on` and `off`\n  this._events = {};\n  this._mouseTarget = false;\n  this._colorChangeActive = false;\n  this.css = opts.css || opts.styles || undefined;\n  // Wait for the document to be ready, then mount the UI\n  whenReady(() => {this._mount(el, opts)});\n}\n\ncolorPicker.prototype = {\n  constructor: colorPicker,\n\n  /**\n    * @desc mount the color picker UI into the DOM\n    * @param {Element | String} el - a DOM element or the CSS selector for a DOM element to use as a container for the UI\n    * @param {Object} opts - options for this instance\n    * @access protected\n  */\n  _mount: function(el, opts) {\n    // If `el` is a string, use it to select an Element, else assume it's an element\n    el = (\"string\" == typeof el) ? document.querySelector(el) : el;\n    // Find the width and height for the UI\n    // If not defined in the options, try the HTML width + height attributes of the wrapper, else default to 320\n    var width = opts.width || parseInt(el.width) || 320;\n    var height = opts.height || parseInt(el.height) || 320;\n    // Calculate layout variables\n    var padding = opts.padding + 2 || 6,\n        borderWidth = opts.borderWidth || 0,\n        markerRadius = opts.markerRadius || 8,\n        sliderMargin = opts.sliderMargin || 24,\n        sliderHeight = opts.sliderHeight || markerRadius * 2 + padding * 2 + borderWidth * 2,\n        bodyWidth = Math.min(height - sliderHeight - sliderMargin, width),\n        wheelRadius = bodyWidth / 2 - borderWidth,\n        leftMargin = (width - bodyWidth) / 2;\n    var marker = {\n      r: markerRadius\n    };\n    var borderStyles = {\n      w: borderWidth,\n      color: opts.borderColor || \"#fff\",\n    };\n\n    // Create UI elements\n    this.el = el;\n    this.svg = new svg(el, width, height, opts.display);\n    this.ui = [\n      new wheel(this.svg, {\n        cX: leftMargin + bodyWidth / 2,\n        cY: bodyWidth / 2,\n        r: wheelRadius,\n        rMax: wheelRadius - (markerRadius + padding),\n        marker: marker,\n        border: borderStyles,\n        lightness: opts.wheelLightness == undefined ? true : opts.wheelLightness,\n        anticlockwise: opts.anticlockwise\n      }),\n      new slider(this.svg, {\n        sliderType: \"v\",\n        x: leftMargin + borderWidth,\n        y: bodyWidth + sliderMargin,\n        w: bodyWidth - borderWidth * 2,\n        h: sliderHeight - borderWidth * 2,\n        r: sliderHeight / 2 - borderWidth,\n        marker: marker,\n        border: borderStyles\n      })\n    ];\n    // Create an iroStyleSheet for this colorWheel's CSS overrides\n    this.stylesheet = new iroStyleSheet();\n    // Create an iroColor to store this colorWheel's selected color\n    this.color = new iroColor();\n    // Whenever the selected color changes, trigger a colorWheel update too\n    this.color._onChange = this._update.bind(this);\n    this.color.set(opts.color || opts.defaultValue || \"#fff\")\n    // Hacky workaround for a couple of Safari SVG url bugs\n    // See https://github.com/jaames/iro.js/issues/18\n    // TODO: perhaps make this a seperate plugin, it's hacky and takes up more space than I'm happy with\n    this.on(\"history:stateChange\", (base) => {this.svg.updateUrls(base)});\n    // Listen to events\n    listen(this.svg.el, [EVENT_MOUSEDOWN, EVENT_TOUCHSTART], this);\n    this.emit(\"mount\", this);\n  },\n\n  /**\n    * @desc update the selected color\n    * @param {Object} newValue - the new HSV values\n    * @param {Object} oldValue - the old HSV values\n    * @param {Object} changes - booleans for each HSV channel: true if the new value is different to the old value, else false\n    * @access protected\n  */\n  _update: function(color, changes) {\n    var rgb = color.rgbString;\n    var css = this.css;\n    // Loop through each UI element and update it\n    for (var i = 0; i < this.ui.length; i++) {\n      this.ui[i].update(color, changes); \n    }\n    // Update the stylesheet too\n    for (var selector in css) {\n      var properties = css[selector];\n      for (var prop in properties) {\n        this.stylesheet.setRule(selector, prop, rgb);\n      }\n    } \n    // Prevent infinite loops if the color is set inside a `color:change` callback\n    if (!this._colorChangeActive) {\n      // While _colorChangeActive = true, this event cannot be fired\n      this._colorChangeActive = true;\n      this.emit(\"color:change\", color, changes);\n      this._colorChangeActive = false;\n    }\n  },\n\n    /**\n    * @desc Set a callback function for an event\n    * @param {String} eventType The name of the event to listen to, pass \"*\" to listen to all events\n    * @param {Function} callback The watch callback\n  */\n  on: function(eventType, callback) {\n    var events = this._events;\n    (events[eventType] || (events[eventType] = [])).push(callback);\n  },\n\n  /**\n    * @desc Remove a callback function for an event added with on()\n    * @param {String} eventType The name of the event\n    * @param {Function} callback The watch callback to remove from the event\n  */\n  off: function(eventType, callback) {\n    var eventList = this._events[eventType];\n    if (eventList) eventList.splice(eventList.indexOf(callback), 1);\n  },\n\n  /**\n    * @desc Emit an event\n    * @param {String} eventType The name of the event to emit\n    * @param {Array} args array of args to pass to callbacks\n  */\n  emit: function(eventType, ...args) {\n    var events = this._events,\n        callbackList = (events[eventType] || []).concat((events[\"*\"] || []));\n    for (var i = 0; i < callbackList.length; i++) {\n      callbackList[i].apply(null, args); \n    }\n  },\n\n  /**\n    * @desc DOM event handler\n    * @param {Event} e DOM event (currently either mouse or touch events)\n  */\n  handleEvent: function(e) {\n    // Detect if the event is a touch event by checking if it has the `touches` property\n    // If it is a touch event, use the first touch input\n    var point = e.touches ? e.changedTouches[0] : e,\n        // Get the screen position of the UI\n        rect = this.svg.el.getBoundingClientRect(),\n        // Convert the screen-space pointer position to local-space\n        x = point.clientX - rect.left,\n        y = point.clientY - rect.top;\n        \n    switch (e.type) {\n      case EVENT_MOUSEDOWN:\n      case EVENT_TOUCHSTART:\n        // Loop through each UI element and check if the point \"hits\" it\n        for (var i = 0; i < this.ui.length; i++) {\n          var uiElement = this.ui[i];\n          // If the element is hit, this means the user has clicked the element and is trying to interact with it\n          if (uiElement.checkHit(x, y)) {\n            // Set an internal reference to the uiElement being interacted with, for other internal event handlers\n            this._mouseTarget = uiElement;\n            // Attach event listeners\n            listen(document, [EVENT_MOUSEMOVE, EVENT_TOUCHMOVE, EVENT_MOUSEUP, EVENT_TOUCHEND], this);\n            // Emit input start event\n            this.emit(\"input:start\", this.color);\n            // Finally, use the position to update the picked color\n            this.color.hsv = this._mouseTarget.input(x, y);\n          }\n        }\n        break;\n      case EVENT_MOUSEMOVE:\n      case EVENT_TOUCHMOVE:\n        // Use the position to update the picker color\n        this.color.hsv = this._mouseTarget.input(x, y);\n        break;\n      case EVENT_MOUSEUP:\n      case EVENT_TOUCHEND:\n        this._mouseTarget = false;\n        this.emit(\"input:end\", this.color);\n        unlisten(document, [EVENT_MOUSEMOVE, EVENT_TOUCHMOVE, EVENT_MOUSEUP, EVENT_TOUCHEND], this);\n        break;\n    }\n    if (this._mouseTarget) {\n      e.preventDefault();\n    }\n  }\n}\n\nmodule.exports = colorPicker;\n\n\n// WEBPACK FOOTER //\n// ./modules/colorPicker.js","import colorPicker from \"modules/colorPicker\";\nimport color from \"modules/color\";\nimport stylesheet from \"modules/stylesheet\";\n\nmodule.exports = {\n  Color: color,\n  ColorPicker: colorPicker,\n  Stylesheet: stylesheet,\n  version: VERSION\n};\n\n\n\n// WEBPACK FOOTER //\n// ./iro.js","import marker from \"ui/marker\";\nimport iroColor from \"modules/color\";\n\n// css class prefix for this element\nvar CLASS_PREFIX = \"iro__slider\";\n\n/**\n  * @constructor slider UI\n  * @param {svgRoot} svg - svgRoot object\n  * @param {Object} opts - options\n*/\nconst slider = function (svg, opts) {\n  var r = opts.r,\n  w = opts.w,\n  h = opts.h,\n  x = opts.x,\n  y = opts.y,\n  borderWidth = opts.border.w;\n\n  // \"range\" limits how far the slider's marker can travel, and where it stops and starts along the X axis\n  opts.range = {\n    min: x + r,\n    max: (x + w) - r,\n    w: w - (r * 2)\n  };\n\n  opts.sliderType = opts.sliderType || \"v\";\n\n  this.type = \"slider\";\n  this._opts = opts;\n\n  var radius = r + borderWidth / 2;\n\n  var baseGroup = svg.g({\n    class: CLASS_PREFIX,\n  });\n\n  var rect = baseGroup.insert(\"rect\", {\n    class: CLASS_PREFIX + \"__value\",\n    rx: radius,\n    ry: radius,\n    x: x - borderWidth / 2,\n    y: y - borderWidth / 2,\n    width: w + borderWidth,\n    height: h + borderWidth,\n    strokeWidth: borderWidth,\n    stroke: opts.border.color,\n  });\n\n  rect.setGradient(\"fill\", svg.gradient(\"linear\", {\n    0: {color: \"#000\"},\n    100: {color: \"#fff\"}\n  }));\n\n  this._gradient = rect.gradient;\n\n  this.marker = new marker(baseGroup, opts.marker);\n};\n\nslider.prototype = {\n  constructor: slider,\n\n  /**\n    * @desc updates this element to represent a new color value\n    * @param {Object} color - an iroColor object with the new color value\n    * @param {Object} changes - an object that gives a boolean for each HSV channel, indicating whether ot not that channel has changed\n  */\n  update: function(color, changes) {\n    var opts = this._opts;\n    var range = opts.range;\n    var hsv = color.hsv;\n    var hsl = iroColor.hsv2Hsl({h: hsv.h, s: hsv.s, v: 100});\n    if (opts.sliderType == \"v\") {\n      if (changes.h || changes.s) {\n        this._gradient.stops[1].setAttrs({stopColor: \"hsl(\" + hsl.h + \",\" + hsl.s + \"%,\" + hsl.l + \"%)\"});\n      }\n      if (changes.v) {\n        var percent = (hsv.v / 100);\n        this.marker.move(range.min + (percent * range.w), opts.y + (opts.h / 2));\n      }\n    }\n  },\n\n  /**\n    * @desc Takes a point at (x, y) and returns HSV values based on this input -- use this to update a color from mouse input\n    * @param {Number} x - point x coordinate\n    * @param {Number} y - point y coordinate\n    * @return {Object} - new HSV color values (some channels may be missing)\n  */\n  input: function(x, y) {\n    var opts = this._opts;\n    var range = opts.range;\n    var dist = Math.max(Math.min(x, range.max), range.min) - range.min;\n    return {\n      v: Math.round((100 / range.w) * dist),\n    };\n  },\n\n  /**\n    * @desc Check if a point at (x, y) is inside this element\n    * @param {Number} x - point x coordinate\n    * @param {Number} y - point y coordinate\n    * @return {Boolean} - true if the point is a \"hit\", else false\n  */\n  checkHit: function(x, y) {\n    var opts = this._opts;\n    return (x > opts.x) && (x < opts.x + opts.w) && (y > opts.y) && (y < opts.y + opts.h);\n  }\n\n};\n\nmodule.exports = slider;\n\n\n// WEBPACK FOOTER //\n// ./ui/slider.js","var GRADIENT_INDEX = 0;\nvar GRADIENT_SUFFIX = \"Gradient\";\nvar SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nvar SVG_ATTRIBUTE_SHORTHANDS = {\n  class: \"class\",\n  stroke: \"stroke\",\n  strokeWidth: \"stroke-width\",\n  fill: \"fill\",\n  opacity: \"opacity\",\n  offset: \"offset\",\n  stopColor: \"stop-color\",\n  stopOpacity: \"stop-opacity\",\n};\n// TODO: figure out why these aren't being compressed properly?\nvar SVG_TRANSFORM_SHORTHANDS = {\n  translate: \"setTranslate\",\n  scale: \"setScale\",\n  rotate: \"setRotate\"\n};\n// sniff useragent string to check if the user is running IE, Edge or Safari\nvar ua = window.navigator.userAgent.toLowerCase();\nvar IS_IE = /msie|trident|edge/.test(ua);\nvar IS_SAFARI = /^((?!chrome|android).)*safari/i.test(ua);\n/**\n  * @constructor svg element wrapper\n  * @param {svgRoot} root - svgRoot object\n  * @param {svgElement | Element} parent - parent node \n  * @param {String} type - element tag name\n  * @param {Object} attrs - element attributes\n*/\nconst svgElement = function(root, parent, type, attrs) {\n  var el = document.createElementNS(SVG_NAMESPACE, type);\n  this.el = el;\n  this.setAttrs(attrs);\n  (parent.el || parent).appendChild(el);\n  this._root = root;\n  this._svgTransforms = {};\n  this._transformList = el.transform ? el.transform.baseVal : false;\n};\n\nsvgElement.prototype = {\n  constructor: svgElement,\n\n  /**\n    * @desc insert a new svgElement\n    * @param {String} type - element tag name\n    * @param {Object} attrs - element attributes\n  */\n  insert: function(type, attrs) {\n    return new svgElement(this._root, this, type, attrs);\n  },\n\n  /**\n    * @desc shorthand to insert a new group svgElement\n    * @param {Object} attrs - element attributes\n  */\n  g: function(attrs) {\n    return this.insert(\"g\", attrs);\n  },\n\n  /**\n    * @desc shorthand to insert a new arc svgElement\n    * @param {Number} cx - arc center x\n    * @param {Number} cy - arc center y\n    * @param {Number} radius - arc radius\n    * @param {Number} startAngle - arc start angle (in degrees)\n    * @param {Number} endAngle - arc end angle (in degrees)\n    * @param {Object} attrs - element attributes\n  */\n  arc: function(cx, cy, radius, startAngle, endAngle, attrs) {\n    var largeArcFlag = endAngle - startAngle <= 180 ? 0 : 1;\n    startAngle *= Math.PI / 180;\n    endAngle *= Math.PI / 180;\n    var x1 = cx + radius * Math.cos(endAngle),\n        y1 = cy + radius * Math.sin(endAngle),\n        x2 = cx + radius * Math.cos(startAngle),\n        y2 = cy + radius * Math.sin(startAngle);\n    attrs = attrs || {};\n    attrs.d = [\"M\", x1, y1, \"A\", radius, radius, 0, largeArcFlag, 0, x2, y2].join(\" \");\n    return this.insert(\"path\", attrs);\n  },\n\n  /**\n    * @desc shorthand to insert a new circle svgElement\n    * @param {Number} cx - circle center x\n    * @param {Number} cy - circle center y\n    * @param {Number} radius - circle radius\n    * @param {Object} attrs - element attributes\n  */\n  circle: function(cx, cy, radius, attrs) {\n    attrs = attrs || {};\n    attrs.cx = cx;\n    attrs.cy = cy;\n    attrs.r = radius;\n    return this.insert(\"circle\", attrs);\n  },\n\n  /**\n    * @desc set a rotate/translate/scale transform on this element\n    * @param {String} type - transform (rotate | translate | scale)\n    * @param {Array} args - transform values\n  */\n  setTransform: function(type, args) {\n    if (!IS_IE) {  \n      var transform, transformFn;\n      var svgTransforms = this._svgTransforms;\n      if (!svgTransforms[type]) {\n        transform = this._root.el.createSVGTransform();\n        svgTransforms[type] = transform;\n        this._transformList.appendItem(transform);\n      } else {\n        transform = svgTransforms[type];\n      }\n      transformFn = (type in SVG_TRANSFORM_SHORTHANDS) ? SVG_TRANSFORM_SHORTHANDS[type] : type;\n      transform[transformFn].apply(transform, args);\n    } else {\n      // Microsoft still can't make a web browser that actually works, as such, Edge + IE dont implement SVG transforms properly.\n      // We have to force them instead... geez\n      this.setAttrs({\"transform\": type + \"(\" + args.join(\", \") + \")\"});\n    }\n  },\n\n  /**\n    * @desc set attributes on this element\n    * @param {Object} attrs - element attributes\n  */\n  setAttrs: function (attrs) {\n    for (var attr in attrs) {\n      var name = (attr in SVG_ATTRIBUTE_SHORTHANDS) ? SVG_ATTRIBUTE_SHORTHANDS[attr] : attr;\n      this.el.setAttribute(name, attrs[attr]);\n    }\n  },\n\n  setGradient: function(attr, gradient) {\n    var attrs = {};\n    attrs[attr] = gradient.getUrl();\n    gradient._refs[attr] = this;\n    this.gradient = gradient;\n    this.setAttrs(attrs);\n  }\n};\n\n/**\n  * @constructor svg gradient wrapper\n  * @param {svgRoot} root - svgRoot object\n  * @param {String} type - gradient type (linear | radial)\n  * @param {Object} stops - gradient stops = {color, opacity} keyed by offset value\n*/\nconst svgGradient = function(root, type, stops) {\n  var stopElements = [];\n  var gradient = root._defs.insert(type + GRADIENT_SUFFIX, {\n    id: \"iro\" + GRADIENT_SUFFIX + (GRADIENT_INDEX++)\n  });\n  for (var offset in stops) {\n    var stop = stops[offset];\n    stopElements.push(gradient.insert(\"stop\", {\n      offset: offset + \"%\",\n      stopColor: stop.color,\n      stopOpacity: stop.opacity === undefined ? 1 : stop.opacity,\n    }));\n  }\n  this.el = gradient.el;\n  this.stops = stopElements;\n  this._refs = {};\n};\n\nsvgGradient.prototype.getUrl = function(base) {\n  var root = IS_SAFARI ? (base || window.location.href) : \"\";\n  return \"url(\" + root + \"#\" + this.el.id + \")\";\n};\n\n/**\n  * @constructor svg root element (inherits svgElement)\n  * @param {svgElement | Element} parent - parent node \n  * @param {Number} width - svg width\n  * @param {Number} height - svg height\n*/\nconst svgRoot = function(parent, width, height, display) {\n  svgElement.call(this, this, parent, \"svg\", {\n    width, \n    height, \n    style: \"display:\" + (display || \"block\")\n  });\n  this._defs = this.insert(\"defs\");\n  this._gradients = [];\n};\n\nsvgRoot.prototype = Object.create(svgElement.prototype);\nsvgRoot.prototype.constructor = svgRoot;\nsvgRoot.prototype.gradient = function(type, stops) {\n  var gradient = new svgGradient(this, type, stops);\n  this._gradients.push(gradient);\n  return gradient;\n};\nsvgRoot.prototype.updateUrls = function(base) {\n  if (IS_SAFARI) {\n    var gradients = this._gradients;\n    for (var i = 0; i < gradients.length; i++) {\n      for (var key in gradients[i]._refs) {\n        var attrs = {};\n        attrs[key] = gradients[i].getUrl(base);\n        gradients[i]._refs[key].setAttrs(attrs);\n      }\n    }\n  }\n};\n\nmodule.exports = svgRoot;\n\n\n// WEBPACK FOOTER //\n// ./ui/svg.js","import marker from \"ui/marker\";\n\n// css class prefix for this element\nvar CLASS_PREFIX = \"iro__wheel\";\n// Quick references to reused math functions\nvar PI = Math.PI,\n    sqrt = Math.sqrt,\n    abs = Math.abs,\n    round = Math.round;\n\n/**\n  * @constructor hue wheel UI\n  * @param {svgRoot} svg - svgRoot object\n  * @param {Object} opts - options\n*/\nconst wheel = function (svg, opts) {\n  this._opts = opts;\n  this.type = \"wheel\";\n\n  var cY = opts.cY,\n      cX = opts.cX,\n      r = opts.r,\n      border = opts.border;\n\n  var baseGroup = svg.g({\n    class: CLASS_PREFIX,\n  });\n\n  baseGroup.circle(cX, cY, r + border.w / 2, {\n    class: CLASS_PREFIX + \"__border\",\n    fill: \"#fff\",\n    stroke: border.color,\n    strokeWidth: border.w,\n  });\n\n  var ringGroup = baseGroup.g({\n    class: CLASS_PREFIX + \"__hue\",\n    strokeWidth: r,\n    fill: \"none\",\n  });\n\n  for (var hue = 0; hue < 360; hue++) {\n    ringGroup.arc(cX, cY, r / 2, hue, hue + 1.5, {\n      stroke: \"hsl(\" + (opts.anticlockwise ? 360 - hue : hue) + \",100%,50%)\",\n    });\n  }\n\n  var saturation = baseGroup.circle(cX, cY, r, {\n    class: CLASS_PREFIX + \"__saturation\"\n  });\n\n  saturation.setGradient(\"fill\", svg.gradient(\"radial\", {\n    0: {\n      color: \"#fff\"\n    },\n    100: {\n      color:\"#fff\", \n      opacity: 0\n    },\n  }));\n\n  this._lightness = baseGroup.circle(cX, cY, r, {\n    class: CLASS_PREFIX + \"__lightness\",\n    opacity: 0\n  });\n\n  this.marker = new marker(baseGroup, opts.marker);\n};\n\nwheel.prototype = {\n  constructor: wheel,\n\n  /**\n    * @desc updates this element to represent a new color value\n    * @param {Object} color - an iroColor object with the new color value\n    * @param {Object} changes - an object that gives a boolean for each HSV channel, indicating whether ot not that channel has changed\n  */\n  update: function(color, changes) {\n    var opts = this._opts;\n    var hsv = color.hsv;\n    // If the V channel has changed, redraw the wheel UI with the new value\n    if (changes.v && opts.lightness) {\n      this._lightness.setAttrs({opacity: (1 - hsv.v / 100).toFixed(2) });\n    }\n    // If the H or S channel has changed, move the marker to the right position\n    if (changes.h || changes.s) {\n      // convert the hue value to radians, since we'll use it as an angle\n      var hueAngle = (opts.anticlockwise ? 360 - hsv.h : hsv.h) * (PI / 180);\n      // convert the saturation value to a distance between the center of the ring and the edge\n      var dist = (hsv.s / 100) * opts.rMax;\n      // Move the marker based on the angle and distance\n      this.marker.move(opts.cX + dist * Math.cos(hueAngle), opts.cY + dist * Math.sin(hueAngle));\n    }\n  },\n\n  /**\n    * @desc Takes a point at (x, y) and returns HSV values based on this input -- use this to update a color from mouse input\n    * @param {Number} x - point x coordinate\n    * @param {Number} y - point y coordinate\n    * @return {Object} - new HSV color values (some channels may be missing)\n  */\n  input: function(x, y) {\n    var opts = this._opts,\n        rangeMax = opts.rMax,\n        _x = opts.cX - x,\n        _y = opts.cY - y;\n\n    var angle = Math.atan2(_y, _x),\n        // Calculate the hue by converting the angle to radians\n        hue = round(angle * (180 / PI)) + 180,\n        // Find the point's distance from the center of the wheel\n        // This is used to show the saturation level\n        dist = Math.min(sqrt(_x * _x + _y * _y), rangeMax);\n    \n    hue = (opts.anticlockwise ? 360 - hue : hue);\n\n    // Return just the H and S channels, the wheel element doesn't do anything with the L channel\n    return {\n      h: hue,\n      s: round((100 / rangeMax) * dist)\n    };\n  },\n\n  /**\n    * @desc Check if a point at (x, y) is inside this element\n    * @param {Number} x - point x coordinate\n    * @param {Number} y - point y coordinate\n    * @return {Boolean} - true if the point is a \"hit\", else false\n  */\n  checkHit: function(x, y) {\n    var opts = this._opts;\n\n    // Check if the point is within the hue ring by comparing the point's distance from the centre to the ring's radius\n    // If the distance is smaller than the radius, then we have a hit\n    var dx = abs(x - opts.cX),\n        dy = abs(y - opts.cY);\n    return sqrt(dx * dx + dy * dy) < opts.r;\n  }\n};\n\nmodule.exports = wheel;\n\n\n// WEBPACK FOOTER //\n// ./ui/wheel.js"],"sourceRoot":""}